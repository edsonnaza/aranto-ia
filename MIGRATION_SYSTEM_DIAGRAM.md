# Diagrama del Sistema Automatizado de MigraciÃ³n

## ğŸ¯ Flujo de EjecuciÃ³n (Un Comando)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  $ php artisan legacy:migrate --force                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   MigrateLegacyData Command          â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â”‚ 1. Print Banner                   â”‚
        â”‚ â”‚ 2. Verify Legacy Connection       â”‚
        â”‚ â”‚ 3. Request User Confirmation      â”‚
        â”‚ â”‚ 4. Call MasterLegacyMigrationSeeder
        â”‚ â”‚ 5. Measure Execution Time         â”‚
        â”‚ â”‚ 6. Generate Report (optional)     â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         MasterLegacyMigrationSeeder                     â”‚
        â”‚                                                         â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘         FASE 1: CONFIGURACIÃ“N BASE                â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ NavigationPermissionsSeeder                  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ CashRegisterPermissionsSeeder                â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ InsuranceTypesSeeder (Particular, Mutualista)â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ ServiceCategoriesSeeder (28 categorÃ­as)      â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ CreateAdditionalServiceCategoriesSeeder      â”‚â”‚  â”‚
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘      FASE 2: DATOS BÃSICOS DE ARANTO              â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ ServicesSeeder (servicios no-legacy)         â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ CashRegisterUsersSeeder (usuarios)           â”‚â”‚  â”‚
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘      FASE 3: MAESTROS DESDE LEGACY                â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ SpecialtiesFromLegacySeeder                  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ 482 especialidades con validaciÃ³n          â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ ProfessionalsFromLegacySeeder                â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ Profesionales con referencias a especialidades
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘ FASE 4: SERVICIOS DESDE LEGACY (CON SANITACIONES) â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ ServicesFromLegacySeeder                     â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Lee productos de legacy                  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Sanitiza nombres (UTF-8, acentos)        â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”‚  Ejemplo: CauterizaciiÂ¿Â½n â†’ CauterizaciÃ³n  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Mapea categorÃ­as legacy â†’ aranto         â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Crea LegacyServiceMappings (482 mapeos)  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ Genera cÃ³digos Ãºnicos                    â”‚â”‚  â”‚
        â”‚  â•‘ â”‚                                               â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ Ejecuta migraciones de limpieza UTF-8 automÃ¡ticamente:
        â”‚  â•‘ â”‚   â”œâ”€ 2026_01_06_160000_clean_corrupted...    â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ 2026_01_06_170000_fix_utf8...           â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ 2026_01_06_180000_final_cleanup...      â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ 2026_01_06_190000_intelligent...        â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ 2026_01_06_200000_aggressive_cleanup... â”‚â”‚  â”‚
        â”‚  â•‘ â”‚                                               â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ ServicePricesFromLegacySeeder               â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ 482 servicios Ã— 2 seguros = 964 precios â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Mapeo: Particular (ID 1)                 â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ Mapeo: Mutualista (ID 11)                â”‚â”‚  â”‚
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘       FASE 5: DATOS COMPLEJOS                     â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ PatientsFromLegacySeeder                     â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ ServiceRequestSeeder                         â”‚â”‚  â”‚
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
        â”‚  â•‘   FASE 6: VALIDACIONES Y REPORTES                â•‘  â”‚
        â”‚  â•‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘  â”‚
        â”‚  â•‘ â”‚ â€¢ validateIntegrity()                          â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Contar servicios                         â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Contar precios                          â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Verificar caracteres corruptos          â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â”œâ”€ Validar FK constraints                  â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ Mostrar estadÃ­sticas                    â”‚â”‚  â”‚
        â”‚  â•‘ â”‚                                               â”‚â”‚  â”‚
        â”‚  â•‘ â”‚ â€¢ generateReport()                            â”‚â”‚  â”‚
        â”‚  â•‘ â”‚   â””â”€ Guardar en: storage/logs/migration_*.txt â”‚â”‚  â”‚
        â”‚  â•‘ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘  â”‚
        â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
        â”‚                         â”‚                                â”‚
        â”‚                         â–¼                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                            â”‚
                    â–¼                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Mostrar Resumen      â”‚    â”‚  Generar Reporte       â”‚
        â”‚  âœ“ MigraciÃ³n OK       â”‚    â”‚  (si --report)         â”‚
        â”‚  â€¢ Tiempo total       â”‚    â”‚                        â”‚
        â”‚  â€¢ Estado final       â”‚    â”‚ detailed_report_*.txt  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Sanitizaciones AutomÃ¡ticas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SANITIZACIONES INCLUIDAS EN CADA EJECUCIÃ“N           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£  SANITIZACIÃ“N DE NOMBRES (ServicesFromLegacySeeder)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Input:  "ACOMPAÃƒ'AMIENTO DE RN A TRASLADO"             â”‚
    â”‚         (corrupto UTF-8)                               â”‚
    â”‚                                                        â”‚
    â”‚ Proceso: ServiceCodeHelper::sanitizeServiceName()      â”‚
    â”‚  â€¢ removeAccents() â†’ ACOMPANAMIENTO...                â”‚
    â”‚  â€¢ strtolower() â†’ acompanamiento...                   â”‚
    â”‚  â€¢ ucwords() â†’ Acompanamiento De Rn A Traslado        â”‚
    â”‚  â€¢ trim() â†’ "Acompanamiento De Rn A Traslado"         â”‚
    â”‚                                                        â”‚
    â”‚ Output: "Acompanamiento De Rn A Traslado"             â”‚
    â”‚         (limpio, Title Case)                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2ï¸âƒ£  MIGRACIONES DE LIMPIEZA UTF-8 (AutomÃ¡ticas)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Input:  "CauterizaciiÂ¿Â½n QuiÂ¿Â½mica"                   â”‚
    â”‚                                                        â”‚
    â”‚ MigraciÃ³n 1: clean_corrupted_service_names             â”‚
    â”‚  â†’ "CauterizaciÃ³nÃ³n QuiÃ³mica"                         â”‚
    â”‚                                                        â”‚
    â”‚ MigraciÃ³n 2-3: fix_utf8 + final_cleanup                â”‚
    â”‚  â†’ "CauterizaciciÃ³n QuÃ­mica"                          â”‚
    â”‚                                                        â”‚
    â”‚ MigraciÃ³n 4-5: intelligent + aggressive_cleanup        â”‚
    â”‚  â†’ "CauterizaciÃ³n QuÃ­mica" âœ“                          â”‚
    â”‚                                                        â”‚
    â”‚ Output: Correcto y limpio                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3ï¸âƒ£  VALIDACIÃ“N DE CARACTERES CORRUPTOS
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BÃºsqueda: "Â¿" y "Â½" en nombres de servicios            â”‚
    â”‚ Resultado: 0 encontrados                               â”‚
    â”‚ Status: âœ“ LIMPIO                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Estructura de Datos Migrados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BASE DE DATOS ARANTO                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  SERVICIOS (492 total)                                      â”‚
â”‚  â”œâ”€ Desde Legacy: 482                                       â”‚
â”‚  â”‚  â”œâ”€ Mapeados: LegacyServiceMappings (1:1)              â”‚
â”‚  â”‚  â”œâ”€ Precios: ServicePrices (482 Ã— 2 seguros = 964)     â”‚
â”‚  â”‚  â”œâ”€ CategorÃ­as: ServiceCategories (28 categorÃ­as)      â”‚
â”‚  â”‚  â””â”€ Acentos: 490 servicios con Ã³, Ã¡, Ã©, Ã­, Ãº           â”‚
â”‚  â”‚                                                         â”‚
â”‚  â””â”€ Locales: 10                                             â”‚
â”‚     â””â”€ ServicesSeeder (no requieren precio/seguro)         â”‚
â”‚                                                             â”‚
â”‚  SEGUROS (2 principales)                                    â”‚
â”‚  â”œâ”€ Particular (ID 1)                                       â”‚
â”‚  â”‚  â””â”€ 474 precios (467,241 - 982,321)                     â”‚
â”‚  â”‚                                                         â”‚
â”‚  â””â”€ Mutualista (ID 11)                                      â”‚
â”‚     â””â”€ 474 precios (278,541 - 892,155)                     â”‚
â”‚                                                             â”‚
â”‚  CATEGORÃAS (28 total)                                      â”‚
â”‚  â”œâ”€ Servicios Sanatoriales                                  â”‚
â”‚  â”œâ”€ Consultas Consultorios                                  â”‚
â”‚  â”œâ”€ Servicios Cardiologia                                   â”‚
â”‚  â”œâ”€ Servicios Otorrinonaringologia                          â”‚
â”‚  â”œâ”€ Servicios Radiologia IMAP                               â”‚
â”‚  â”œâ”€ Servicios Ecografias                                    â”‚
â”‚  â””â”€ ... 22 categorÃ­as mÃ¡s ...                               â”‚
â”‚                                                             â”‚
â”‚  ESPECIALIDADES (DESDE LEGACY)                              â”‚
â”‚  â”œâ”€ Cardiologia                                             â”‚
â”‚  â”œâ”€ Ginecologia                                             â”‚
â”‚  â”œâ”€ Otorrinonaringologia                                    â”‚
â”‚  â””â”€ ... desde legacy ...                                    â”‚
â”‚                                                             â”‚
â”‚  PROFESIONALES (DESDE LEGACY)                               â”‚
â”‚  â”œâ”€ Con FK a Especialidades                                 â”‚
â”‚  â”œâ”€ Con FK a Usuarios                                       â”‚
â”‚  â””â”€ Validaciones de referencia                              â”‚
â”‚                                                             â”‚
â”‚  PACIENTES (DESDE LEGACY)                                   â”‚
â”‚  â”œâ”€ Con datos de identificaciÃ³n                             â”‚
â”‚  â”œâ”€ Con FK a InsuranceTypes                                 â”‚
â”‚  â””â”€ InformaciÃ³n de contacto                                 â”‚
â”‚                                                             â”‚
â”‚  REFERENCIAS CRUZADAS                                       â”‚
â”‚  â”œâ”€ legacy_service_mappings (482 registros)                â”‚
â”‚  â”‚  â””â”€ Mapeo 1:1 entre legacy.producto y aranto.service    â”‚
â”‚  â”‚                                                         â”‚
â”‚  â”œâ”€ service_service_category (482 registros)               â”‚
â”‚  â”‚  â””â”€ AsignaciÃ³n de categorÃ­as                            â”‚
â”‚  â”‚                                                         â”‚
â”‚  â””â”€ Integridad Referencial: âœ“ 100%                         â”‚
â”‚     â”œâ”€ Todas las FK vÃ¡lidas                                â”‚
â”‚     â”œâ”€ No hay huÃ©rfanos                                     â”‚
â”‚     â””â”€ Conteos consistentes                                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## â±ï¸ Timeline de EjecuciÃ³n

```
Fase                                    DuraciÃ³n Estimada
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FASE 1: ConfiguraciÃ³n Base              < 1 segundo
FASE 2: Datos BÃ¡sicos                   < 1 segundo
FASE 3: Maestros desde Legacy           2-5 segundos
FASE 4: Servicios + Precios             10-20 segundos
        (+ 5 migraciones de limpieza)
FASE 5: Datos Complejos                 30-60 segundos
FASE 6: Validaciones + Reportes         2-5 segundos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                                   45-90 SEGUNDOS
```

## ğŸ›¡ï¸ Validaciones Integradas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VALIDACIONES AUTOMÃTICAS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ âœ“ ConexiÃ³n a Legacy                                         â”‚
â”‚   â””â”€ Verificar antes de iniciar                            â”‚
â”‚                                                             â”‚
â”‚ âœ“ Integridad Referencial                                    â”‚
â”‚   â”œâ”€ Service â†’ Category (todos vÃ¡lidos)                     â”‚
â”‚   â”œâ”€ ServicePrice â†’ Service (FK vÃ¡lida)                     â”‚
â”‚   â”œâ”€ ServicePrice â†’ InsuranceType (FK vÃ¡lida)               â”‚
â”‚   â””â”€ Professional â†’ Specialty (FK vÃ¡lida)                   â”‚
â”‚                                                             â”‚
â”‚ âœ“ Caracteres Corruptos                                      â”‚
â”‚   â”œâ”€ BÃºsqueda de Â¿                                          â”‚
â”‚   â”œâ”€ BÃºsqueda de Â½                                          â”‚
â”‚   â”œâ”€ BÃºsqueda de caracteres UTF-8 invÃ¡lidos                â”‚
â”‚   â””â”€ Reporte si encuentra alguno                           â”‚
â”‚                                                             â”‚
â”‚ âœ“ Conteos y Consistencia                                    â”‚
â”‚   â”œâ”€ Total servicios vs mapeados                            â”‚
â”‚   â”œâ”€ Precios vs servicios (debe ser Ã— 2)                    â”‚
â”‚   â”œâ”€ CategorÃ­as asignadas                                   â”‚
â”‚   â””â”€ Especialidades y profesionales                         â”‚
â”‚                                                             â”‚
â”‚ âœ“ Acentos VÃ¡lidos                                           â”‚
â”‚   â”œâ”€ Detectar servicios con Ã³, Ã¡, Ã©, Ã­, Ãº                  â”‚
â”‚   â””â”€ Mostrar conteo en reporte                              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Idempotencia Guarantees

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SEGURO EJECUTAR MÃšLTIPLES VECES SIN DUPLICADOS             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ EjecuciÃ³n 1:                                                â”‚
â”‚  $ php artisan legacy:migrate --force                       â”‚
â”‚  âœ“ Crea 482 servicios                                       â”‚
â”‚  âœ“ Crea 964 precios                                         â”‚
â”‚  âœ“ Crea 482 mappings                                        â”‚
â”‚                                                             â”‚
â”‚ EjecuciÃ³n 2:                                                â”‚
â”‚  $ php artisan legacy:migrate --force                       â”‚
â”‚  âœ“ 482 servicios ya existen â†’ updateOrCreate               â”‚
â”‚  âœ“ 964 precios ya existen â†’ updateOrCreate                 â”‚
â”‚  âœ“ Resultados: Sin cambios o actualizaciones                â”‚
â”‚                                                             â”‚
â”‚ EjecuciÃ³n 3:                                                â”‚
â”‚  $ php artisan legacy:migrate --force                       â”‚
â”‚  âœ“ Todo ya existe y estÃ¡ sincronizado                       â”‚
â”‚  âœ“ Resultados: Sin cambios                                  â”‚
â”‚                                                             â”‚
â”‚ Ventajas:                                                   â”‚
â”‚  âœ“ No duplica servicios                                     â”‚
â”‚  âœ“ Actualiza si cambios en legacy                           â”‚
â”‚  âœ“ Seguro para testing y debugging                          â”‚
â”‚  âœ“ Seguro para producciÃ³n                                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Documento**: Diagrama del Sistema Automatizado
**Fecha**: 6 de enero de 2026
**Estado**: ğŸš€ LISTO PARA PRODUCCIÃ“N
